#!/usr/bin/env bash

main_session=main

# If we don't have main session → then create main session
if ! tmux has-session -t "=$main_session" 2> /dev/null; then
    tmux new-session -ds $main_session -n MAIN
fi

# If we don't have MAIN window → then create main window
if ! tmux list-window -t $main_session | grep MAIN ; then 
  tmux-MAIN-home
else
  
  # Else create new window in the main session witn "name$index"
  index=$((1+$(wc -l <<<$( tmux list-windows -t $main_session))))
  window_name=win$index
  tmux neww -t $main_session:$index -n $window_name
    
    # Then switch to the dest
    if [ ! $TMUX ] ; then
      tmux a -t $main_session 
    else
      tmux switch-client -t $main_session
    fi
fi
